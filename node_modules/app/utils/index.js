var jsonfile = require('jsonfile'),
    countryListDataPath = appRoot + '\\node_modules\\world-countries\\dist\\countries.json',
    EARTH_RADIUS = 6378137;

module.exports = {
    getCountryList: function(callback) {
        jsonfile.readFile(countryListDataPath, function(err, obj) {
            callback(obj);
        });
    },
    random: function(maxValue, minValue) {
        minValue = minValue || 0;
        return minValue + Math.trunc(Math.random() * (maxValue - minValue));
    },
    getRandomArrayEntry: function(array, removeEntryFromArray) {
        var index = this.random(array.length),
            entry = array[index];
        if(removeEntryFromArray) {
            array.splice(index, 1);
        }
        return entry;
    },
    forEachKeyInDict: function(dict, fn) {
        for(var key in dict) {
            if(dict.hasOwnProperty(key)) {
                fn(dict[key]);
            }
        }
    },
    getDistanceBetweenCoords: function(long1, lat1, long2, lat2) {
        var x = (long2 - long1) * Math.cos((lat1 + lat2) / 2),
            y = lat2 - lat1;
        return Math.sqrt(x * x + y * y) * EARTH_RADIUS;
    }
};

